# philoberry-project

브랜드 PHILOBERRY 사이트 개발 진행사항입니다.

---

### 진행사항

#### 7월 구현 및 사용된 기능

1. Next12 + Next-auth4 + 구글 Oauth2 로 로그인 기능 구현

- 관리자 계정만 가능하게 함

2. 굿즈 페이지, 갤러리 페이지 ,메인 페이지 구현
3. 네비게이션 바 및 사이드바 구현
4. tailwind CSS 사용

- SSR은 미사용 중, 후에 변경 예정
- React-query 로 서버 상태관리 예정

```
프로젝트 방향성 변경 및 개인 사정으로 임시 중단
```

#### 8월

- 잠정 중단

#### 클라우드 아키텍처 엔지니어와 프로젝트 진행

##### 2023.09.06 (수)

- 갤러리 배경 변경 기능 → react query로 서버 상태관리 : Restful API 엔드포인트 설정 ,현재 서버와 연결 안되어있어서 color.txt에 보관
- 네비게이션바 모션 추가

##### 2023.09.07 (목)

- 이미지 AWS S3에 업로드 준비
- 이미지 파일 유효성 검사, 다중 업로드 상태관리

##### 2023.09.08 (금)

- 이미지 미리보기 설정 및 이미지 클릭 시 이미지 삭제
  - 현재 이미지 업로드와 이미지 삭제가 중복되어 작동 (미해결)

##### 2023.09.12 (화)

- 갤러리 페이지 모달창 추가 (모달창 열릴 시 스크롤 락)
- 카드 컴포넌트 개선
- 업로드 이미지의 bytes 미리보기

##### 2023.09.13 (수)

- 네비게이션 바 모션 변경
- 세일 페이지 props 개선
- AWS RDS mySQL 만들기 및 연결 (1차 연결 실패)

##### 2023.09.14 (목)

- AWS RDS MySQL 연결 성공 : 테스트를 위해 Public 설정
- Prisma (ORM 도구) 사용
- AWS Cloud Shell로 DB 생성 후 Prisma로 스키마 설정

##### 2023.09.15 (금)

- 버그 대응 및 현업자 조언으로 Next13 버전으로 업그레이드 결정
  - 메이저는 최신으로 유지하는 것이 좋다고 한다. app 디렉토리를 현업에서 사용중이라고 함.
  - pages -> app 디렉토리변경
  - \_app.tsx -> layout.tsx , index.txs -> page.tsx
  - “next/router” → “next/navigation”
  - 기본적으로 SSR을 제공해서 CSR은 "use client"로 함으로써 SSR부분과 CSR 부분을 구분 (진행중)
  - react-query 부분을 ProviderWrapper 부분으로 이동
  - AppProps를 사용 → children : React.ReactNode 타입을 가진 props로 변경

##### 2023.09.19(화)

- Next13 마이그레이션 진행
- 메인페이지를 서버 컴포넌트 변경

##### 2023.09.20(수)

- admin 폴더 트리 Next13에 맞게 조정
- RDS + s3 업로드 진행

##### 2023.09.22(금)

- RDS에 올라갈 데이터 스키마 및 타입 조정

##### 2023.09.25(월)

- RDS + s3 시도 중 (실패)

##### 2023.09.26(화)

- 어드민 전용 : 배경색 DB에 저장 (react-query 사용)
- 드래그앤드롭 작동 오류 해결 (이미지 클릭 시 삭제와 올리기 동시 활성화를 구분)

##### 2023.09.27(수)

- 'rds+s3' 은 성공 했으나 rds에 저장된 s3의 url로 접근 불가

##### 2023.09.28(목)

- 갤러리 및 모달 약간 수정

##### 2023.09.29 ~ 10.04(추석 및 코로나)

##### 2023.10.05(목)

- rds + s3 시 url 대신 Key를 저장하는 방식으로 문제 해결!!!

##### 2023.10.06(금)

- 제품 업로드 및 로드 api 분할
- 이미지 key 없을 떄 rds 및 s3 이미지 삭제처리 완료

##### 2023.10.10(월)

- RDS disconnect 문제 해결
- 완판시 품절 표시 기능 추가
- react-select 라이브러리 사용
- Input 컴포넌트 생성

##### 2023.10.11(화)

- 작가 업로드 기능 구현
- 제품 수정 API를 통해 정보 가져오기 기능 구현

##### 2023.10.12(수)

- 작가 정보 가져오는 기능 구현

##### 2023.10.13(목)

- 작품 업로드 기능 구현
- 협업 작가명 가져오기 기능 구현

##### 2023.10.16(월)

- react-query hydrate를 이용한 SEO 최적화 시도 (실패)

##### 2023.10.17(화)

- NEXT_PUBLIC 환경 변수 사용 필수화
- 모든 API 요청 lib/action.ts에서 처리
- 갤러리쪽 API 작업

##### 2023.10.18(수)

- 도커 이미지 빌딩 시도
- 모달 창 스타일 변경
- 이미지 호버 시 full screen 기능 구현

##### 2023.10.19(목)

- 로그인 페이지 생성
- JWT 인증 시도

##### 2023.10.20(금)

- Footer 변경
- 협업작가 변경 페이지 생성

##### 2023.10.23(월)

- 프로덕션 테스트
- 미디어 쿼리 with tailwind 적용

##### 2023.10.24(화)

- 갤러리 모달창 스타일 추가
- 제품 상세페이지 carousel 적용

##### 2023.10.25(수)

- swiper.js 라이브러리 사용
- 갤러리 모달 스타일 변경

##### 2023.10.30(월)

- DockFile 관리 작업
- github action workflow 테스트

##### 2023.10.31(화)

- Next 자체 백엔드에서 express 로 분리
- axios -> fetch로 API 요청 방식 변경

##### 2023.11.01(수)

- 사이드바 미디어 쿼리 적용
- CI/CD 테스트 및 도커 이미지 세팅 수정

##### 2023.11.02(목)

- AWS-SDK JS 버전 업그레이드 (v2->v3)
- 컬러 피커 스타일 수정

##### 2023.11.03(금)

- Zoom 버튼 CSS 추가
- Nav bar 표시 수정

##### 2023.11.07(화)

- 어드민 스타일 변경

##### 2023.11.08(수)

- Loading 창 개선 (spin , reflect 기능)

##### 2023.11.10(금)

- 전체적인 admin 스타일 개선
- tunnel-ssh 라이브러리를 이용한 prisma rds 통신 시도 (실패)

##### 2023.11.12(일)

- 도커 빌드 후 AWS ECR 과 ECS를 통한 배포 시도
- 서버 Prisma 위치 변경
- SSH 통신 방식 파기

##### 2023.11.13(월)

- 프로덕션 환경 설정
- SSR 적용

##### 2023.11.14(화)

- CORS 설정 (전체 -> 특정 사이트만)
- 개발 중에는 계속 전체로 설정

##### 2023.11.15(수)

- 업로드 실패 및 성공 시 알림 추가
- 제품 추가에 zustand 적용

##### 2023.11.16(목)

- Input 태그에 타이핑 시 계속 체크되는 에러 zustand immer 라이브러리 적용
- Navbar 핫픽스

##### 2023.11.20(월)

- RDS 업로드 실패 시 S3 삭제 액션 개선
- Client prisma 제거 (현재 서버 타입 사용이 제한되어 유지 중)
- 페이지 최적화를 위한 useMemo, useCallback, revokeObjectUrl 적용

##### 2023.11.21(화)

- uploadArtist zustand 적용
- Admin notification 적용
- 배경색 및 input 색 수정

##### 2023.11.22(수)

- Drag and drop 통합
- Next-auth 로그인 404 에러 핫픽스
- Next-auth Next.js 13에 맞게 위치 수정
- 로그인 커스텀 에러페이지 생성
- 로그인은 client, 다른 API 요청은 express로 변경 (타겟그룹 변경)
- editProduct 핫픽스

##### 2023.11.23(목)

- 어드민 페이지 접근 권한 컴포넌트 생성(withAdminAuth) 및 고차컴포넌트 적용
- Navbar 핫픽스
- Noto Sans 폰트 적용
- 모달창 최적화

##### 2023.11.24(금)

- 빌드 및 프로덕션 테스트

##### 2023.11.27(일)

- 어드민 페이지 새로고침시 메인페이지로 redirect 되는 문제 해결
- Next page routing 에러 해결 (Windows OS 문제)
- 에러 페이지 추가
- SC 문제 해결

##### 2023.11.28(월)

- S3 CORS 에러 with Head 403 에러 해결 (Get 사용이 정상)
- Loading Suspense 적용
